# Notification System

A comprehensive notification management system with real-time updates, drawer interface, filtering capabilities, and complete state management for React applications.

## Features

- **Real-time Notifications**: Automatic updates with simulated live notifications
- **Drawer Interface**: Responsive slide-out notification panel
- **Filtering System**: Switch between read and unread notifications
- **Pagination Support**: Handle large notification lists efficiently
- **CRUD Operations**: Complete create, read, update, delete functionality
- **Bulk Actions**: Mark all as read or delete all notifications
- **Toast Integration**: User feedback for all operations
- **Context Provider**: Global state management across components
- **Responsive Design**: Optimized for mobile and desktop
- **Loading States**: Skeleton components during data fetching
- **Demo Mode**: Fully functional without backend dependencies

## Components

### Core Components

1. **NotificationProvider** - Context provider for global state management
2. **NotificationDrawer** - Main drawer interface for notifications
3. **NotificationCard** - Individual notification display component
4. **NotificationCardSkeleton** - Loading placeholder component
5. **NotificationFilter** - Filter controls for notification types
6. **NotificationListItem** - List item component for notifications
7. **NotificationOrder** - Sorting controls for notifications
8. **TextDisplayer** - Text rendering utility component

## Usage

### Basic Setup

```tsx
import NotificationProvider from '@/components/notifications/NotificationProvider';
import NotificationDrawer from '@/components/notifications/NotificationDrawer';
import { useNotification } from '@/components/notifications/NotificationProvider';

function App() {
  return (
    <NotificationProvider>
      <YourAppContent />
    </NotificationProvider>
  );
}

function YourAppContent() {
  const { openNotificationDrawer, setOpenNotificationDrawer, unreadNum } = useNotification();

  return (
    <div>
      <button onClick={() => setOpenNotificationDrawer(true)}>
        Notifications ({unreadNum})
      </button>
      
      <NotificationDrawer
        open={openNotificationDrawer}
        toggleOpen={() => setOpenNotificationDrawer(!openNotificationDrawer)}
      />
    </div>
  );
}
```

### Hook Usage

```tsx
import { useNotification } from '@/components/notifications/NotificationProvider';

function NotificationBell() {
  const {
    unreadNum,
    openNotificationDrawer,
    setOpenNotificationDrawer,
    notifications,
    markAsReadNotification,
    deleteNotification
  } = useNotification();

  return (
    <Badge badgeContent={unreadNum} color="error">
      <IconButton onClick={() => setOpenNotificationDrawer(true)}>
        <NotificationsIcon />
      </IconButton>
    </Badge>
  );
}
```

## Provider Context

### Available Context Values

| Property | Type | Description |
|----------|------|-------------|
| `openNotificationDrawer` | `boolean` | Controls drawer open/close state |
| `setOpenNotificationDrawer` | `Dispatch<SetStateAction<boolean>>` | Function to control drawer state |
| `notifications` | `Notification[]` | Current notifications array |
| `setNotifications` | `Dispatch<SetStateAction<Notification[]>>` | Function to update notifications |
| `isNotificationsLoading` | `boolean` | Loading state for notifications |
| `setIsNotificationsLoading` | `Dispatch<SetStateAction<boolean>>` | Function to control loading state |
| `tabIndex` | `number` | Current tab index (0=unread, 1=read) |
| `setTabIndex` | `Dispatch<SetStateAction<number>>` | Function to switch tabs |
| `page` | `number` | Current page number for pagination |
| `setPage` | `Dispatch<SetStateAction<number>>` | Function to change page |
| `totalPages` | `number` | Total pages available |
| `setTotalPages` | `Dispatch<SetStateAction<number>>` | Function to set total pages |
| `unreadNum` | `number` | Count of unread notifications |

### Available Methods

| Method | Parameters | Description |
|--------|------------|-------------|
| `getNotifications` | `() => Promise<void>` | Fetch notifications from API |
| `deleteNotification` | `(id: string) => Promise<void>` | Delete specific notification |
| `deleteAllNotification` | `() => Promise<void>` | Delete all notifications in current tab |
| `markAsReadNotification` | `(id: string) => Promise<void>` | Mark specific notification as read |
| `markAllAsReadNotification` | `() => Promise<void>` | Mark all notifications as read |

## Notification Interface

```tsx
interface Notification {
  objectId?: string;
  userId: string;
  notificationId: string;
  title: string;
  message: string;
  objectType: "ProjectCreators" | "Projects";
  isRead?: boolean;
  createdDate: string;
}
```

## Demo Mode Features

The notification system includes a comprehensive demo mode that simulates all functionality without requiring backend APIs:

### Mock Data
- 5 pre-configured notification examples
- Different notification types and states
- Realistic timestamps and content

### Simulated Operations
- **Loading States**: Artificial delays to simulate network requests
- **CRUD Operations**: Full create, read, update, delete simulation
- **Real-time Updates**: New notifications every 30 seconds
- **Filtering**: Works with mock data filtering
- **Pagination**: Simulated pagination with mock data

### Demo Configuration

```tsx
// The provider automatically operates in demo mode when:
// - API imports are commented out
// - Mock data is provided
// - Simulated functions replace real API calls

const MOCK_NOTIFICATIONS = [
  {
    notificationId: "1",
    userId: "demo-user",
    title: "Welcome Message",
    message: "Welcome to Component Atlas!",
    objectType: "Projects",
    isRead: false,
    createdDate: new Date().toISOString(),
  }
  // ... more mock notifications
];
```

## Components Deep Dive

### NotificationDrawer

The main interface component with:
- Responsive design (full-width on mobile)
- Tab navigation (unread/read)
- Pagination controls
- Bulk action buttons
- Individual notification cards

```tsx
<NotificationDrawer
  open={isOpen}
  toggleOpen={() => setIsOpen(!isOpen)}
/>
```

### NotificationCard

Individual notification display with:
- Time ago formatting
- Read/unread visual states
- Action buttons (mark read, delete)
- Confirmation dialogs for destructive actions
- Responsive layout

### NotificationProvider

Context provider that handles:
- Global state management
- API communication (or simulation)
- Real-time notification subscriptions
- Toast notification integration
- Loading state management

## Styling and Theming

The notification system uses Material-UI components with custom styling:

### Theme Integration
- Respects Material-UI theme configuration
- Dark/light mode support
- Custom color schemes for notification states
- Responsive breakpoints

### Custom Styling
```tsx
// Override notification card styles
<NotificationCard
  sx={{
    '& .notification-content': {
      backgroundColor: 'custom-background',
      borderLeft: '4px solid custom-color',
    }
  }}
/>
```

## Real-time Features

### Simulated Real-time (Demo Mode)
- Automatic new notifications every 30 seconds
- Random notification selection from demo pool
- Toast notifications for new items
- Automatic unread count updates

### Production Real-time (When APIs are enabled)
- Supabase real-time subscriptions
- WebSocket connections for live updates
- Automatic UI updates on new notifications
- Proper cleanup and connection management

## Accessibility

- **Keyboard Navigation**: Full keyboard support
- **Screen Readers**: Proper ARIA labels and descriptions
- **Focus Management**: Logical tab order and focus handling
- **High Contrast**: Compatible with high contrast modes
- **Reduced Motion**: Respects user motion preferences

## Performance Optimizations

- **Lazy Loading**: Components load only when needed
- **Pagination**: Large lists are paginated to improve performance
- **Debounced Actions**: Rapid actions are debounced
- **Memory Management**: Proper cleanup of subscriptions and timers
- **Skeleton Loading**: Immediate visual feedback during loading

## Error Handling

- **Network Errors**: Graceful handling of API failures
- **Validation**: Input validation for all operations
- **User Feedback**: Toast notifications for error states
- **Fallback States**: Fallback UI for error conditions
- **Retry Logic**: Automatic retry for failed operations

## Best Practices

### State Management
- Use the provider for all notification-related state
- Avoid direct state manipulation outside the provider
- Leverage the hook for accessing notification data

### Performance
- Implement pagination for large notification lists
- Use skeleton components during loading states
- Debounce rapid user actions

### User Experience
- Provide clear feedback for all user actions
- Use confirmation dialogs for destructive operations
- Implement proper loading states
- Make the interface responsive and accessible

### Integration
- Wrap your app with NotificationProvider at the root level
- Use the drawer component consistently across pages
- Integrate with your existing toast notification system
- Follow the established notification interface structure

## Common Use Cases

1. **User Notifications**: Account updates, messages, alerts
2. **System Notifications**: Maintenance, updates, announcements
3. **Activity Feeds**: User actions, content updates, social interactions
4. **Task Management**: Reminders, deadlines, assignments
5. **E-commerce**: Order updates, shipping notifications, promotions
6. **Admin Dashboards**: System alerts, user activity, performance metrics

## Migration Guide

### From Basic Notifications
1. Install the notification system components
2. Wrap your app with NotificationProvider
3. Replace existing notification displays with NotificationDrawer
4. Update notification data structure to match the interface
5. Integrate with the useNotification hook

### API Integration
1. Uncomment API-related imports in NotificationProvider
2. Replace mock functions with real API calls
3. Configure Supabase or your real-time service
4. Update authentication and JWT handling
5. Test real-time notification delivery